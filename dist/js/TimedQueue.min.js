"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var TimedQueue=function(){function e(){this.queue=[],this.tHandle=null,this.done=!0,this.observers=[]}return e.prototype.addTask=function(e,t){if(!this.done)throw new Error("Job is under process");return this.queue.push({callback:e,time:t})},e.prototype.removeTask=function(e){if(!this.done)throw new Error("Job is under process");var t=this.queue.indexOf(e);if(-1==t)throw new Error("Job not found");this.queue.splice(t,1)},e.prototype.start=function(){var e=this;if(!this.done)throw new Error("Job already started");if(0==this.queue.length)throw new Error("Job Queue is empty");this.done=!1,this.tHandle=setTimeout(function(){e.next()},0)},e.prototype.next=function(){var e=this;if(0==this.queue.length)return this.done=!0,void this.finish();var t=this.queue.shift();t.callback.call(null),this.tHandle=setTimeout(function(){e.next()},t.time)},e.prototype.finish=function(){for(var e=0,t=this.observers;e<t.length;e++){t[e].call(null)}},e.prototype.isCompleted=function(){return this.done},e.prototype.stop=function(){if(!this.done)throw new Error("Queue is not started");clearTimeout(this.tHandle)},e.prototype.subscribe=function(e){this.observers.push(e)},e.prototype.reset=function(){clearTimeout(this.tHandle),this.tHandle=null,this.done=!0,this.queue.length>0&&this.queue.splice(0,this.queue.length)},e}();exports.TimedQueue=TimedQueue;